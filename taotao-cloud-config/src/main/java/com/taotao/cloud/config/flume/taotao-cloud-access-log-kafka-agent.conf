taotao-cloud-access-log.sources = kafkaSource
taotao-cloud-access-log.channels = sourceMemoryChannel parquetMemoryChannel
taotao-cloud-access-log.sinks = sourceHdfsSink parquetHdfsSink
 
taotao-cloud-access-log.sources.kafkaSource.type = org.apache.flume.source.kafka.KafkaSource
taotao-cloud-access-log.sources.kafkaSource.kafka.bootstrap.servers = 106.13.201.31:9092
taotao-cloud-access-log.sources.kafkaSource.kafka.topics = taotao-cloud-backend
taotao-cloud-access-log.sources.kafkaSource.kafka.consumer.group.id = kafka2hdfs
taotao-cloud-access-log.sources.kafkaSource.kafka.consumer.timeout.ms = 100
taotao-cloud-access-log.sources.kafkaSource.batchSize = 10
taotao-cloud-access-log.sources.kafkaSource.batchDurationMillis = 1000
taotao-cloud-access-log.sources.KafkaSource.backoffSleepIncrement = 1000
taotao-cloud-access-log.sources.kafkaSource.maxBackoffSleep = 5000

taotao-cloud-access-log.sources.kafkaSource.channels = sourceMemoryChannel parquetMemoryChannel
taotao-cloud-access-log.sinks.sourceHdfsSink.channel = sourceMemoryChannel
taotao-cloud-access-log.sinks.parquetHdfsSink.channel = parquetMemoryChannel

taotao-cloud-access-log.sources.kafkaSource.selector.type = multiplexing
taotao-cloud-access-log.sources.kafkaSource.selector.header = type
taotao-cloud-access-log.sources.kafkaSource.selector.mapping.source = sourceMemoryChannel
taotao-cloud-access-log.sources.kafkaSource.selector.mapping.parquet = parquetMemoryChannel

taotao-cloud-access-log.channels.sourceMemoryChannel.type = memory
taotao-cloud-access-log.channels.sourceMemoryChannel.capacity = 10
taotao-cloud-access-log.channels.sourceMemoryChannel.transactionCapacity = 10

taotao-cloud-access-log.channels.parquetMemoryChannel.type = memory
taotao-cloud-access-log.channels.parquetMemoryChannel.capacity = 10
taotao-cloud-access-log.channels.parquetMemoryChannel.transactionCapacity = 10
 
taotao-cloud-access-log.sinks.sourceHdfsSink.type = hdfs
taotao-cloud-access-log.sinks.sourceHdfsSink.hdfs.path = hdfs://127.0.0.1:9000/taotao/cloud/access/log/sources
taotao-cloud-access-log.sinks.sourceHdfsSink.hdfs.filePrefix = taotao-cloud-access-log
taotao-cloud-access-log.sinks.sourceHdfsSink.hdfs.inUseSuffix = .tmp.gz
taotao-cloud-access-log.sinks.sourceHdfsSink.hdfs.fileSuffix = .log.gz
taotao-cloud-access-log.sinks.sourceHdfsSink.hdfs.useLocalTimeStamp = true
taotao-cloud-access-log.sinks.sourceHdfsSink.hdfs.minBlockReplicas = 1
taotao-cloud-access-log.sinks.sourceHdfsSink.hdfs.rollInterval = 0
taotao-cloud-access-log.sinks.sourceHdfsSink.hdfs.rollSize = 1024000
taotao-cloud-access-log.sinks.sourceHdfsSink.hdfs.rollCount = 0
taotao-cloud-access-log.sinks.sourceHdfsSink.hdfs.batchSize = 10
taotao-cloud-access-log.sinks.sourceHdfsSink.hdfs.fileType = CompressedStream
taotao-cloud-access-log.sinks.sourceHdfsSink.hdfs.codeC = gzip
#taotao-cloud-access-log.sinks.sourceHdfsSink.hdfs.idleTimeout = 300
#taotao-cloud-access-log.sinks.sourceHdfsSink.hdfs.threadsPoolSize = 10
#taotao-cloud-access-log.sinks.sourceHdfsSink.hdfs.callTimeout = 60000
 
taotao-cloud-access-log.sinks.parquetHdfsSink.type = hdfs
taotao-cloud-access-log.sinks.parquetHdfsSink.hdfs.path = hdfs://127.0.0.1:9000/taotao/cloud/access/log/sources
taotao-cloud-access-log.sinks.parquetHdfsSink.hdfs.filePrefix = taotao-cloud-access-log
taotao-cloud-access-log.sinks.parquetHdfsSink.hdfs.inUseSuffix = .tmp.gz
taotao-cloud-access-log.sinks.parquetHdfsSink.hdfs.fileSuffix = .log.gz
taotao-cloud-access-log.sinks.parquetHdfsSink.hdfs.useLocalTimeStamp = true
taotao-cloud-access-log.sinks.parquetHdfsSink.hdfs.minBlockReplicas = 1
taotao-cloud-access-log.sinks.parquetHdfsSink.hdfs.rollInterval = 0
taotao-cloud-access-log.sinks.parquetHdfsSink.hdfs.rollSize = 1024000
taotao-cloud-access-log.sinks.parquetHdfsSink.hdfs.rollCount = 0
taotao-cloud-access-log.sinks.parquetHdfsSink.hdfs.batchSize = 10
taotao-cloud-access-log.sinks.parquetHdfsSink.hdfs.fileType = CompressedStream
taotao-cloud-access-log.sinks.parquetHdfsSink.hdfs.codeC = gzip
#taotao-cloud-access-log.sinks.parquetHdfsSink.hdfs.idleTimeout = 300
#taotao-cloud-access-log.sinks.parquetHdfsSink.hdfs.threadsPoolSize = 10
#taotao-cloud-access-log.sinks.parquetHdfsSink.hdfs.callTimeout = 60000

taotao-cloud-access-log.sources.kafkaSource.interceptors = sourceInterceptor parquetInterceptor
taotao-cloud-access-log.sources.kafkaSource.interceptors.sourceInterceptor.type = com.taotao.cloud.flume.interceptor.SourceInterceptor$Builder
taotao-cloud-access-log.sources.kafkaSource.interceptors.parquetInterceptor.type = com.taotao.cloud.flume.interceptor.ParquetInterceptor$Builder
